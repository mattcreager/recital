!function(t,e,n){function r(e,n){this.element=t(e),this.options=t.extend({},o,n),this._defaults=o,this._name=i,this.init()}var i="recital",o={tocClass:".recital-toc",currentBookmark:-1};r.prototype.init=function(){this.player=$f(this.element.find("iframe")[0]),this.toc=this.element.find(this.options.tocClass+" a");var t=this;this.player.addEvent("ready",function(){t.player.addEvent("playProgress",t.onPlayProgress.bind(t)),t.player.addEvent("finish",t.clearCurrent.bind(t)),t.toc.on("click",t.onClickBookmark.bind(t))})},r.prototype.onClickBookmark=function(e){this.player.api("seekTo",t(e.target).data("seek-to")),this.setCurrent(e.target),e.preventDefault()},r.prototype.onPlayProgress=function(e,n){var r=this.options.currentBookmark,i=this.toc.map(function(e,n){return+t(n).data("seek-to")}).toArray().reduce(function(t,n,r){return t=e.seconds<n?t:r},-1);r!==i&&-1!==i&&(r=i,this.setCurrent(this.toc[r]))},r.prototype.setCurrent=function(e){t(e).parents("li").hasClass("recital-current")||(this.clearCurrent(),t(e).parents("li").addClass("recital-current"))},r.prototype.clearCurrent=function(){this.toc.each(function(e,n){t(n).parents("li").hasClass("recital-current")&&t(n).parents("li").removeClass("recital-current")})},t.fn[i]=function(e){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new r(this,e))})}}(jQuery,window,document);var Froogaloop=function(){function t(e){return new t.fn.init(e)}function e(t,e,n){if(!n.contentWindow.postMessage)return!1;var r=JSON.stringify({method:t,value:e});n.contentWindow.postMessage(r,u)}function n(t){var e,n;try{e=JSON.parse(t.data),n=e.event||e.method}catch(r){}if("ready"!=n||l||(l=!0),!/^https?:\/\/player.vimeo.com/.test(t.origin))return!1;"*"===u&&(u=t.origin);var o=e.value,a=e.data,s=""===s?null:e.player_id,c=i(n,s),d=[];return c?(void 0!==o&&d.push(o),a&&d.push(a),s&&d.push(s),d.length>0?c.apply(null,d):c.call()):!1}function r(t,e,n){n?(s[n]||(s[n]={}),s[n][t]=e):s[t]=e}function i(t,e){return e?s[e][t]:s[t]}function o(t,e){if(e&&s[e]){if(!s[e][t])return!1;s[e][t]=null}else{if(!s[t])return!1;s[t]=null}return!0}function a(t){return!!(t&&t.constructor&&t.call&&t.apply)}var s={},l=!1,u=(Array.prototype.slice,"*");return t.fn=t.prototype={element:null,init:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.element=t,this},api:function(t,n){if(!this.element||!t)return!1;var i=this,o=i.element,s=""!==o.id?o.id:null,l=a(n)?null:n,u=a(n)?n:null;return u&&r(t,u,s),e(t,l,o),i},addEvent:function(t,n){if(!this.element)return!1;var i=this,o=i.element,a=""!==o.id?o.id:null;return r(t,n,a),"ready"!=t?e("addEventListener",t,o):"ready"==t&&l&&n.call(null,a),i},removeEvent:function(t){if(!this.element)return!1;var n=this,r=n.element,i=""!==r.id?r.id:null,a=o(t,i);"ready"!=t&&a&&e("removeEventListener",t,r)}},t.fn.init.prototype=t.fn,window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n),window.Froogaloop=window.$f=t}();