!function(t,e,n){function i(e,n){this.element=t(e),this.options=t.extend({},o,n),this._defaults=o,this._name=r,this.init()}var r="recital",o={tocClass:".recital-toc",currentBookmark:-1,isPlaying:!1};i.prototype.init=function(){this.player=$f(this.element.find("iframe")[0]),this.toc=this.element.find(this.options.tocClass+" a");var n=this;this.element.on("show",function(){n.isPlaying=!0,n.player.api("play")}),this.element.on("hide",function(){n.isPlaying=!1,n.player.api("pause")}),t(e).on("scroll",function(){var t=n.element.find("iframe").visible();if(!(!t&&!n.isPlaying||t&&n.isPlaying))return!t&&n.isPlaying?(n.isPlaying=!1,void n.player.api("pause")):void(t&&!n.isPlaying&&(n.isPlaying=!0,n.player.api("play")))}),this.player.addEvent("ready",function(){n.player.addEvent("playProgress",n.onPlayProgress.bind(n)),n.player.addEvent("finish",n.clearCurrent.bind(n)),n.toc.on("click",n.onClickBookmark.bind(n))})},i.prototype.onClickBookmark=function(e){var n=t(e.target).closest("a").data("seek-to");this.player.api("seekTo",n),this.setCurrent(e.target),e.preventDefault()},i.prototype.onPlayProgress=function(e,n){var i=this.options.currentBookmark,r=this.toc.map(function(e,n){return+t(n).data("seek-to")}).toArray().reduce(function(t,n,i){return n?t=e.seconds<n?t:i:t},-1);i!==r&&-1!==r&&(i=r,this.setCurrent(this.toc[i]))},i.prototype.setCurrent=function(e){t(e).parents("li").hasClass("recital-current")||(this.clearCurrent(),t(e).parents("li").addClass("recital-current"))},i.prototype.clearCurrent=function(){this.toc.each(function(e,n){t(n).parents("li").hasClass("recital-current")&&t(n).parents("li").removeClass("recital-current")})},t.fn[r]=function(e){return this.each(function(){t.data(this,"plugin_"+r)||t.data(this,"plugin_"+r,new i(this,e))})}}(jQuery,window,document);var Froogaloop=function(){function t(e){return new t.fn.init(e)}function e(t,e,n){if(!n.contentWindow.postMessage)return!1;var i=JSON.stringify({method:t,value:e});n.contentWindow.postMessage(i,u)}function n(t){var e,n;try{e=JSON.parse(t.data),n=e.event||e.method}catch(i){}if("ready"!=n||s||(s=!0),!/^https?:\/\/player.vimeo.com/.test(t.origin))return!1;"*"===u&&(u=t.origin);var o=e.value,a=e.data,l=""===l?null:e.player_id,c=r(n,l),f=[];return c?(void 0!==o&&f.push(o),a&&f.push(a),l&&f.push(l),f.length>0?c.apply(null,f):c.call()):!1}function i(t,e,n){n?(l[n]||(l[n]={}),l[n][t]=e):l[t]=e}function r(t,e){return e?l[e][t]:l[t]}function o(t,e){if(e&&l[e]){if(!l[e][t])return!1;l[e][t]=null}else{if(!l[t])return!1;l[t]=null}return!0}function a(t){return!!(t&&t.constructor&&t.call&&t.apply)}var l={},s=!1,u=(Array.prototype.slice,"*");return t.fn=t.prototype={element:null,init:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.element=t,this},api:function(t,n){if(!this.element||!t)return!1;var r=this,o=r.element,l=""!==o.id?o.id:null,s=a(n)?null:n,u=a(n)?n:null;return u&&i(t,u,l),e(t,s,o),r},addEvent:function(t,n){if(!this.element)return!1;var r=this,o=r.element,a=""!==o.id?o.id:null;return i(t,n,a),"ready"!=t?e("addEventListener",t,o):"ready"==t&&s&&n.call(null,a),r},removeEvent:function(t){if(!this.element)return!1;var n=this,i=n.element,r=""!==i.id?i.id:null,a=o(t,r);"ready"!=t&&a&&e("removeEventListener",t,i)}},t.fn.init.prototype=t.fn,window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n),window.Froogaloop=window.$f=t}();!function(t){var e=t(window);t.fn.visible=function(t,n,i){if(!(this.length<1)){var r=this.length>1?this.eq(0):this,o=r.get(0),a=e.width(),l=e.height(),i=i?i:"both",s=n===!0?o.offsetWidth*o.offsetHeight:!0;if("function"==typeof o.getBoundingClientRect){var u=o.getBoundingClientRect(),c=u.top>=0&&u.top<l,f=u.bottom>0&&u.bottom<=l,h=u.left>=0&&u.left<a,p=u.right>0&&u.right<=a,d=t?c||f:c&&f,y=t?h||p:h&&p;if("both"===i)return s&&d&&y;if("vertical"===i)return s&&d;if("horizontal"===i)return s&&y}else{var v=e.scrollTop(),g=v+l,m=e.scrollLeft(),w=m+a,C=r.offset(),k=C.top,P=k+r.height(),E=C.left,b=E+r.width(),B=t===!0?P:k,L=t===!0?k:P,_=t===!0?b:E,W=t===!0?E:b;if("both"===i)return!!s&&g>=L&&B>=v&&w>=W&&_>=m;if("vertical"===i)return!!s&&g>=L&&B>=v;if("horizontal"===i)return!!s&&w>=W&&_>=m}}}}(jQuery);